<html>
<head>
    <meta charset="utf-8">
    <title>Weather</title>
    <!-- Sets initial viewport load and disables zooming  -->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="css/ionic.css">
    <link rel="stylesheet" href="spinner/waitMe.min.css">
    <link rel="stylesheet" href="owl/assets/owl.carousel.css">
    <link rel="stylesheet" href="owl/assets/owl.theme.default.min.css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="owl/owl.carousel.js"></script>
    <script type="text/javascript" src="spinner/waitMe.min.js"></script>
    <script type="text/javascript" src="phonegap.js"></script>

    <script type="text/javascript">
        var configurations = { FileCount: 99, PageSize: 50 };

        $(function () {
            
            var owl = $('.owl-carousel');

            owl.owlCarousel({
                loop: true,
                dots: true,
                margin: 5,
                responsive: {
                    0: {
                        items: 1
                    },
                    600: {
                        items: 1
                    },
                    960: {
                        items: 1
                    },
                    1200: {
                        items: 1
                    }
                }
            });

            owl.on('mousewheel', '.owl-stage', function (e) {
                if (e.deltaY > 0) {
                    owl.trigger('next.owl');
                } else {
                    owl.trigger('prev.owl');
                }
                e.preventDefault();
            });
        });

        function StartUpdatingApp() {
            $("#progressBar").show();
            ReadLocaFiles(1);
        }

        function showMessage(msg) {
            navigator.notification.alert(
                msg,
                function () { },
                'Maha Sarkar',
                'Ok'
            );
        }
       
        document.addEventListener("deviceready", onDeviceReady, false);

        function onDeviceReady() {

            $(".ionic-body").waitMe({
                effect: 'ios',
                text: 'Please wait',
                bg: 'rgba(255,255,255,0.7)',
                color: '#000'
            });

            var db = window.sqlitePlugin.openDatabase({ name: "sarkar.db" });

            db.transaction(function (tx) {
                tx.executeSql('CREATE TABLE IF NOT EXISTS Voters (VoterId integer primary key, PartNo integer,Srlno integer,Mname text,Ename text,Fname text,RlnName text,LName text,IdCard text,Age text,HouseNo text,Gender text,PsName text,PsLocation text)');

                tx.executeSql("SELECT count(VoterId) as cnt FROM Voters;", [], function (tx, res) {
                    if (res.rows.length > 0) {
                        if (res.rows.item(0).cnt > 1) {
                            showMenuItem("dvHome");
                            $('.ionic-body').waitMe('hide');
                        }
                        else {
                            showMenuItem("dvUpdate");
                            $('.ionic-body').waitMe('hide');
                        }
                    }
                    else {
                        showErro("Data not found");
                        $('.ionic-body').waitMe('hide');
                    }
                });
            });
        }

        function showMenuItem(divName) {
            $(".homeItems").hide();
            $("#" + divName).show();
        }

        function ReadLocaFiles(FileNo) {

            try {
                
                $.ajax({
                    url: 'sarkar/' + FileNo + '.sql',
                    type: 'get',
                    contentType: "application/text; charset=utf-8",
                    success: function (sql) {
                        var db = window.sqlitePlugin.openDatabase({ name: "sarkar.db" });

                        if (db) {
                            db.transaction(function (tx) {
                                $("#logger").append("tx.transaction SUCCESS" + sql.length);
                                try {
                                    tx.executeSql(sql, [], function (tx, res) {
                                        if (FileNo <= configurations.FileCount) {
                                            $("#meter").val(FileNo);
                                            ReadLocaFiles(parseInt(FileNo) + 1);
                                        }
                                        else {
                                            
                                            showMessage("Application has been updated successfully!");

                                            showMenuItem("#dvHome");
                                        }
                                    }, function (e) {
                                        showMessage("tx.executeSql ERROR: " + e.message);
                                    });
                                } catch (e) {
                                    showMessage("db.executeSql catch block ERROR: " + e.message);
                                }
                            }, function (e) {
                                showMessage("db.transaction ERROR: " + e.message);
                            });
                        }
                        else {
                            showMessage("Db not created<br/>");
                        }
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        showMessage("Ajax Error occured for " + FileNo + ", Error: " + JSON.stringify(xhr) + "<br/>");
                    }
                });
            } catch (e) {
                showMessage("ReadLocaFiles Error " + JSON.stringify(e));
            }
        }

    </script>
    <style type="text/css">
        #meter
        {
            margin: 5%;
            width: 90%;
            height: 50px;
            display: block;
        }
        .header-s
        {
            background: rgb(147,206,222); /* Old browsers */
            background: -moz-linear-gradient(top,  rgba(147,206,222,1) 0%, rgba(117,189,209,1) 41%, rgba(73,165,191,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(147,206,222,1)), color-stop(41%,rgba(117,189,209,1)), color-stop(100%,rgba(73,165,191,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* IE10+ */
            background: linear-gradient(to bottom,  rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#93cede', endColorstr='#49a5bf',GradientType=0 ); /* IE6-9 */
        }
        
        .footer-s
        {
            background: rgb(147,206,222); /* Old browsers */
            background: -moz-linear-gradient(top,  rgba(147,206,222,1) 0%, rgba(117,189,209,1) 41%, rgba(73,165,191,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(147,206,222,1)), color-stop(41%,rgba(117,189,209,1)), color-stop(100%,rgba(73,165,191,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* IE10+ */
            background: linear-gradient(to bottom,  rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#93cede', endColorstr='#49a5bf',GradientType=0 ); /* IE6-9 */
        }
        
        .button-s
        {
            background: rgb(246,248,249); /* Old browsers */
            background: -moz-linear-gradient(top,  rgba(246,248,249,1) 0%, rgba(229,235,238,1) 50%, rgba(215,222,227,1) 51%, rgba(245,247,249,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(246,248,249,1)), color-stop(50%,rgba(229,235,238,1)), color-stop(51%,rgba(215,222,227,1)), color-stop(100%,rgba(245,247,249,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 50%,rgba(215,222,227,1) 51%,rgba(245,247,249,1) 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 50%,rgba(215,222,227,1) 51%,rgba(245,247,249,1) 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 50%,rgba(215,222,227,1) 51%,rgba(245,247,249,1) 100%); /* IE10+ */
            background: linear-gradient(to bottom,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 50%,rgba(215,222,227,1) 51%,rgba(245,247,249,1) 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f6f8f9', endColorstr='#f5f7f9',GradientType=0 ); /* IE6-9 */
            -webkit-border-radius: 25px 25px 25px 25px;
            border-radius: 25px 25px 25px 25px;
            -webkit-box-shadow: 2px 2px 2px 2px #A6A7CF;
            box-shadow: 2px 2px 2px 2px #A6A7CF;
            text-shadow: 5px 5px 5px #D6D6FF;
            margin: 10px;
            color: Black;
        }
        
        .button-nav
        {
            background: rgb(246,248,249); /* Old browsers */
            background: -moz-linear-gradient(top,  rgba(246,248,249,1) 0%, rgba(229,235,238,1) 50%, rgba(215,222,227,1) 51%, rgba(245,247,249,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(246,248,249,1)), color-stop(50%,rgba(229,235,238,1)), color-stop(51%,rgba(215,222,227,1)), color-stop(100%,rgba(245,247,249,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 50%,rgba(215,222,227,1) 51%,rgba(245,247,249,1) 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 50%,rgba(215,222,227,1) 51%,rgba(245,247,249,1) 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 50%,rgba(215,222,227,1) 51%,rgba(245,247,249,1) 100%); /* IE10+ */
            background: linear-gradient(to bottom,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 50%,rgba(215,222,227,1) 51%,rgba(245,247,249,1) 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f6f8f9', endColorstr='#f5f7f9',GradientType=0 ); /* IE6-9 */
            -webkit-border-radius: 25px 25px 25px 25px;
            border-radius: 25px 25px 25px 25px;
            -webkit-box-shadow: 2px 2px 2px 2px #A6A7CF;
            box-shadow: 2px 2px 2px 2px #A6A7CF;
            text-shadow: 5px 5px 5px #D6D6FF;
            color: Black;
        }
        
        .main-s
        {
            background: rgb(254,255,255); /* Old browsers */
            background: -moz-linear-gradient(top,  rgba(254,255,255,1) 0%, rgba(210,235,249,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(254,255,255,1)), color-stop(100%,rgba(210,235,249,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  rgba(254,255,255,1) 0%,rgba(210,235,249,1) 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  rgba(254,255,255,1) 0%,rgba(210,235,249,1) 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  rgba(254,255,255,1) 0%,rgba(210,235,249,1) 100%); /* IE10+ */
            background: linear-gradient(to bottom,  rgba(254,255,255,1) 0%,rgba(210,235,249,1) 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#feffff', endColorstr='#d2ebf9',GradientType=0 ); /* IE6-9 */
        }
        
        .listMenu
        {
            background: rgb(147,206,222); /* Old browsers */
            background: -moz-linear-gradient(top,  rgba(147,206,222,1) 0%, rgba(117,189,209,1) 41%, rgba(73,165,191,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(147,206,222,1)), color-stop(41%,rgba(117,189,209,1)), color-stop(100%,rgba(73,165,191,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* IE10+ */
            background: linear-gradient(to bottom,  rgba(147,206,222,1) 0%,rgba(117,189,209,1) 41%,rgba(73,165,191,1) 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#93cede', endColorstr='#49a5bf',GradientType=0 ); /* IE6-9 */
        }
    </style>
</head>
<body>
    <div class="ionic-body">
        <div class="bar bar-header header-s">
            <a class="button icon ion-navicon-round" onclick="showMenuItem('#dvHome');"></a>
            <h1 class="title" style="color: White;">
                Maha Sarkar - 2014</h1>
            <a class="button icon ion-power" onclick="navigator.app.exitApp();"></a>
        </div>
        <div class="content has-header has-footer padding main-s" style="overflow: scroll;
            height: 100%;" id="container">
            <div id="dvUpdate" class="homeItems" style="display:none;">
                <p>
                    Application needs to be updated before start searching, Please click below to start
                    updation</p>
                <p>
                    It may take several minutes to accomplish updations, (Usualy 15-20 minutes but still
                    depends upon on your device processing speed)</p>
                <button class="button button-full header-s" onclick="StartUpdatingApp();" style="color: White;">
                    Click to Start Updating Application
                </button>
                <div id="progressBar" style="display: none;">
                    <p>
                        Please wait while application updating it self before you start working with it,
                        it should up to date</p>
                    <p style="padding: 10px;">
                        <meter id="meter" value="0" max="50" high="30" low="10"></meter>
                    </p>
                    <p id="logger" style="border: solid 1px silver; padding: 2px;">
                    </p>
                </div>
            </div>
            <div id="dvHome" class="homeItems">
                <div class="owl-carousel">
                    <div class="item" style="padding: 0; margin: 0; border: none; background-color: Transparent;">
                        <div class="row">
                            <div class="col">
                                <a href="NameSearch.html" class="button button-full button-s" style="font-size: 14px;
                                    font-weight: bold;">
                                    <img src="images/search.png" style="width: 75px; height: 75px;" alt="Latest cases" /><br />
                                    By Name</a>
                            </div>
                            <div class="col">
                                <a href="topic.html" class="button button-full button-s" style="font-size: 14px;
                                    font-weight: bold;">
                                    <img src="images/search.png" style="width: 75px; height: 75px;" alt="Latest cases" /><br />
                                    By Surname</a>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <a href="#" class="button button-full button-s" style="font-size: 14px; font-weight: bold;">
                                    <img src="images/search.png" style="width: 75px; height: 75px;" alt="Latest cases" /><br />
                                    By Father Name</a>
                            </div>
                            <div class="col">
                                <a href="topic.html" class="button button-full button-s" style="font-size: 14px;
                                    font-weight: bold;">
                                    <img src="images/search.png" style="width: 75px; height: 75px;" alt="Latest cases" /><br />
                                    By House No</a>
                            </div>
                        </div>
                    </div>
                    <div class="item" style="padding: 0; margin: 0; border: none; background-color: Transparent;">
                        <div class="row">
                            <div class="col">
                                <a href="#" class="button button-full button-s" style="font-size: 14px; font-weight: bold;">
                                    <img src="images/search.png" style="width: 75px; height: 75px;" alt="Latest cases" /><br />
                                    By Name</a>
                            </div>
                            <div class="col">
                                <a href="topic.html" class="button button-full button-s" style="font-size: 14px;
                                    font-weight: bold;">
                                    <img src="images/search.png" style="width: 75px; height: 75px;" alt="Latest cases" /><br />
                                    By Surname</a>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <a href="#" class="button button-full button-s" style="font-size: 14px; font-weight: bold;">
                                    <img src="images/search.png" style="width: 75px; height: 75px;" alt="Latest cases" /><br />
                                    By Father Name</a>
                            </div>
                            <div class="col">
                                <a href="topic.html" class="button button-full button-s" style="font-size: 14px;
                                    font-weight: bold;">
                                    <img src="images/search.png" style="width: 75px; height: 75px;" alt="Latest cases" /><br />
                                    By House No</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <br />
            <br />
            <br />
        </div>
        <div class="bar bar-footer footer-s">
            <a class="button icon  ion-information-circled" href="#"></a>
            <h1 class="title">
                CANDIDATE NAME</h1>
            <a class="button icon  ion-ipad" href="#"></a>
        </div>
    </div>
</body>
</html>
